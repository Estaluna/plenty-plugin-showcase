{#
    Provided blocks:
     - Introduction
     - AdditionalScripts

    Required variables:
     - sections: Object containing sections to include into page ( label => file )
     - navId (optional): an id referencing the generated fixed navigation

    Provided variables:
     - sectionId: The id referencing the container element of the current section
#}
{% extends 'PlentyPluginShowcase::HtmlStructure' %}

{%  block MainFrame %}
<div class="row">
    <div class="col-lg-9 col-md-9">

        {% block Introduction %}{% endblock %}

        {% for label, section in sections %}
            {% set sectionId = label | cssSelector %}
            <div class="example-container">
                {{ include( section, {sectionId: sectionId} ) }}
            </div>
        {%  endfor %}
    </div>

    <div class="col-lg-3 col-md-3 hidden-sm hidden-xs fixed-right" id="{{ navId | default('sidebar-nav') }}">
        <ul class="nav nav-list">
            {#% for label in sections | keys %}
                <li>
                    <a href="#{{ label | cssSelector }}" data-scrollTo="#{{ label | cssSelector }}" data-scrollOffset="70">{{ label }}</a>
                </li>
            {%  endfor %#}
        </ul>
        <a href="#" data-scrollTo="0">Zur√ºck nach oben</a>
    </div>
</div>
{% endblock %}

{% block AdditionalScripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ext-static_highlight.js"></script>

    <script>
        var highlight = ace.require("ace/ext/static_highlight");
        var dom = ace.require("ace/lib/dom");

        function qsa(sel) {
            return Array.apply(null, document.querySelectorAll(sel));
        }
        qsa("[ace-mode]").forEach(function (codeEl) {

            var mode = codeEl.getAttribute("ace-mode");
            if( mode == "hh" ) mode = "php";
            highlight(codeEl, {
                mode: "ace/mode/" + mode,
                showGutter: true,
                trim: true
            }, function (highlighted) {
            });
        });
    </script>

    <script>
        (function($) {
            $(document).ready(function() {
                $('[data-toggle="tooltip"]').tooltip({
                    trigger: 'hover click focus'
                });
            });

            $(window).on('load', function() {
                $('[data-toggle="height"]').each(function(i, elem) {
                    var $elem = $(elem);
                    var $panelBody = $elem.parents('.panel-expandable');

                        $elem.click(function() {
                            var width = parseInt( $panelBody.find('.panel-expandable-inner').width() );
                            $panelBody.find('.panel-expandable-inner').width( width );
                            $panelBody.toggleClass('expanded');
                            $elem.find('.glyphicon').toggleClass('glyphicon-resize-full');
                            $elem.find('.glyphicon').toggleClass('glyphicon-resize-small');

                        });
                });
            });
        } (jQuery));
    </script>


{% endblock %}